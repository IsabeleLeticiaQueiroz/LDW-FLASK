{% extends "base.html" %}

{% block content %}
<div class="modern-container">
    <div class="modern-grid">
        <!-- Formulário (mantido igual) -->
        <div>
            <h2 class="modern-title">Adicionar Novo Personagem</h2>
            <div class="modern-form">
                <form method="POST">
                    <div class="mb-4">
                        <label for="nome" class="form-label">
                            <i class="bi bi-person-circle modern-icon"></i>Nome do Personagem
                        </label>
                        <input type="text" class="form-control" id="nome" name="nome" required placeholder="Ex: Coelhinho Felício">
                    </div>
                    
                    <div class="mb-4">
                        <label for="familia" class="form-label">
                            <i class="bi bi-people-fill modern-icon"></i>Família
                        </label>
                        <input type="text" class="form-control" id="familia" name="familia" required placeholder="Ex: Família Coelho">
                    </div>
                    
                    <div class="mb-4">
                        <label for="idade" class="form-label">
                            <i class="bi bi-balloon modern-icon"></i>Idade
                        </label>
                        <input type="text" class="form-control" id="idade" name="idade" required placeholder="Ex: 5 anos">
                    </div>
                    
                    <div class="mb-4">
                        <label for="profissao" class="form-label">
                            <i class="bi bi-briefcase modern-icon"></i>Profissão
                        </label>
                        <input type="text" class="form-control" id="profissao" name="profissao" required placeholder="Ex: Padeiro">
                    </div>
                    
                    <div class="mb-4">
                        <label for="caracteristica" class="form-label">
                            <i class="bi bi-stars modern-icon"></i>Característica Especial
                        </label>
                        <textarea class="form-control" id="caracteristica" name="caracteristica" rows="3" required placeholder="Ex: Tem um vestido azul florido"></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label for="imagem" class="form-label">
                            <i class="bi bi-image modern-icon"></i>URL da Imagem
                        </label>
                        <input type="url" class="form-control" id="imagem" name="imagem" placeholder="https://exemplo.com/imagem.jpg">
                        <small class="form-text text-muted">Cole o link de uma imagem do personagem (opcional)</small>
                    </div>
                    
                    <button type="submit" class="btn modern-btn w-100">
                        <i class="bi bi-plus-circle"></i> Adicionar Personagem
                    </button>
                </form>
            </div>
        </div>
        
        <!-- Tabela Corrigida -->
        <div>
            <h2 class="modern-title">Todos os Personagens</h2>
            
            {% if personagens %}
                <div class="modern-table-container mb-4">
                    <div class="table-responsive">
                        <table class="table modern-table">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Família</th>
                                    <th>Idade</th>
                                    <th>Profissão</th>
                                    <th>Característica</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for familia, chars in personagens.items() %}
                                    {% for char in chars %}
                                    <tr>
                                        <td><strong>{{ char.name }}</strong></td>
                                        <td>{{ char.family }}</td>
                                        <td>{{ char.age }}</td>
                                        <td>{{ char.occupation }}</td>
                                        <td>{{ char.characteristic }}</td>
                                    </tr>
                                    {% endfor %}
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            {% else %}
                <div class="modern-alert">
                    <i class="bi bi-info-circle-fill"></i>
                    Nenhum personagem adicionado ainda. Use o formulário ao lado para adicionar personagens!
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
.character-image {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 10px;
    border: 3px solid #8a6d3b;
    box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    display: block;
    background: white;
}


.table td {
    vertical-align: middle;
}
</style>
{% endblock %}